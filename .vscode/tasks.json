{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Run game",
		 	"command": "godot",
			"problemMatcher": []
		},
		{
			"label": "Format all",
			"detail": "gdformat $(find . -name '*.gd')",
			"type": "shell",
			"command": "gdformat $(find . -name '*.gd')",
			"problemMatcher": []
		},
		{
			"label": "Lint all",
			"detail": "gdlint $(find . -name '*.gd')",
			"type": "shell",
			"command": "gdlint $(find . -name \"*.gd\")",
			"problemMatcher": []
		},
		{
			// Godot_v4.1.2-stable_win64.exe ItsSpreadingTheGame\project.godot
			"label": "Open editor",
			"command": "godot",
			"args": ["${workspaceFolder}\\project.godot"],
			"problemMatcher": []
		},
		{
			"label": "Export HTML",
			"command": "godot",
			"args": [
				"--path ${workspaceFolder}\\project.godot",
				"--export-release \"Web\"",
				"release_name.zip",
				"--headless",
				"--verbose"
			],
			"problemMatcher": []
		},
		{
			"label": "Export Windows",
			"command": "godot",
			"args": [
				"--path ${workspaceFolder}\\project.godot",
				"--export-release \"Windows Desktop\"",
				"release_name.exe",
				"--headless",
				"--verbose"
			],
			"problemMatcher": []
		},
		{
            "label": "Export Web & Zip",
            "type": "shell",
            "command": "mkdir -p build/web && godot --headless --export-release \"Web\" build/web/index.html && cd build/web && zip -r ../../web_export.zip ./* && cd ../..",
            "windows": {
                "command": "if (!(Test-Path build/web)) { New-Item -ItemType Directory -Path build/web }; godot --headless --export-release 'Web' build/web/index.html; Compress-Archive -Path build/web/* -DestinationPath web_export.zip -Force"
            },
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": [],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": true,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": true
            }
        },
		{// Butler has to be on path
			"label": "Manual Push to Itch",
			"command": "butler push web_export.zip zahkros/wagner:html-troubleshooting",
			"problemMatcher": []
		},
		
	]
}